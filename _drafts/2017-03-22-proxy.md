---
layout: post
title: 代理
permalink: proxy
---

代理是个好东西，它的作用不仅仅是翻墙，还能让你查看调试自己的网络，看看那些应用到底发送了什么信息。

根据功能可以分为看别人用的和查自己用的。


# 看别人用
## [shadowsocks]

## [ProxyChains]
On Debian/Ubuntu:

```
apt-get install proxychains
```

On Mac OS X:

```
brew install proxychains-ng
```

Make a config file at ~/.proxychains/proxychains.conf with content:

```
strict_chain
proxy_dns
remote_dns_subnet 224
tcp_read_time_out 15000
tcp_connect_time_out 8000
localnet 127.0.0.0/255.0.0.0
quiet_mode

[ProxyList]
socks5  127.0.0.1 1080
```

Then run command with proxychains. Examples:

```
proxychains4 curl https://www.twitter.com/
proxychains4 git push origin master
Or just proxify bash:

proxychains4 bash
curl https://www.twitter.com/
git push origin master
```

## [Tor]
对，Tor 其实也是一个代理。如果是安装的 Tor 浏览器，会发现它使用的 127.0.0.1:9050 代理。

如果安装的 tor 服务，去 /etc/tor/torrc 文件里会发现它默认是 打开 9050 端口的，除非想要只做为中继模式，9051 是控制端口，默认是不打开的。

## 免费的代理

- [西刺免费代理](http://www.xicidaili.com/)


# 中继
有时需要负载均衡，或者网络的链式链接，就需要中继了。

## iptables — administration tool for IPv4/IPv6 packet filtering and NAT
如其名，ip 包的表格，它就是一个规则表，里面规定了进来的 ip 包如何被处理：

```bash
ACCEPT  means to let the packet through.  DROP means to drop the packet on the floor.  RETURN means stop traversing this chain  and  resume  at the  next rule in the previous (calling) chain.

If the end of a built-in chain is reached or a rule in a built-in chain with target RETURN is matched,  the  target specified by the chain policy determines the fate of the packet.
```


## [HAProxy](http://www.haproxy.org/)
它其实是用来网络负载平衡的重器，这里我们只用了它的中继功能。

# 查自己用
## [whistle](https://github.com/avwo/whistle)
whistle 是基于 node 的，跨平台，有 web 界面。配置简单，而且作者中国人，文档写得特别好！

安装Node、安装whistle、启动whistle、配置代理。

```bash
npm install -g whistle

w2 start
```

注意 HTTPS [需要配置](https://avwo.github.io/whistle/webui/https.html)。

## [mitmproxy](https://github.com/mitmproxy/mitmproxy)

```bash
sudo apt-get install python-dev libffi-dev
pip install mitmproxy
```

## [wyproxy](https://github.com/ring04h/wyproxy)
基于 mitmproxy，增加了 web 界面等功能。


# 浏览器插件

## [SwitchyOmega]

# 参考
- https://segmentfault.com/q/1010000000094520
