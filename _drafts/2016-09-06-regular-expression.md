---
layout: post
title: 正则表达式
permalink: regexp
---

# 字符

- 普通字符
- . 任意一个字符

# 字符集合 []
使用 [] 来定义字符集合，像数组一样。

[a-d]，表示 [abcd]。而 [^a-d]表示非 abcd 的字符集合。

转义的字符集：

- \w  构成单词的字符
- \W  非构成单词的字符
- \s  空白文字，同[\t\n\r\f]
- \S  非空白文字
- \d  数字，同[0-9]
- \D  非数字

# 分组 ()

- ()   有向后引用的分组
- \1,\2 向后引用，对应第n个括号里的内容
- (?:) 无后向引用的分组

所谓向后引用，就是在后面可以用 \1,\2 引用前面第n个括号里的内容。

# 重复

- *	重复零次或更多次
- +	重复一次或更多次
- ?	重复零次或一次
- {n}	重复n次
- {n,}	重复n次或更多次
- {n,m}	重复n到m次

# 贪婪与懒惰

# 选择

# 锚点

- ^  行首
- $  行尾（若含换行，则是其前面的字符）
- \A 字符串头
- \Z 字符串尾（若含换行，匹配前一字符）
- \z 字符串尾
- \b 词头或词尾（[]外）
- (?=) 用模式来指定位置
- (?!) 用否定模式来指定位置
- (?#) 注释

# 例子

Rails string underscore:

```ruby
unless String.method_defined? :underscore
  String.class_eval do
    def underscore
      self.to_s.gsub(/::/, '/').
        gsub(/([A-Z]+)([A-Z][a-z])/,'\1_\2').
        gsub(/([a-z\d])([A-Z])/,'\1_\2').
        tr("-", "_").
        downcase
    end
  end
end
```

# 参考
- 《松本行宏的程序世界》
